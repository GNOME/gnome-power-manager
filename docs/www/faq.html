<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- header -->
<head>
 <title>GNOME Power Manager</title>
 <link rel="stylesheet" type="text/css" href="http://www.gnome.org/default.css" />
 <link rel="stylesheet" type="text/css" href="default.css" />
 <link rel="icon" type="image/png" href="images/favicon.ico" />
</head>
<!---->

<body>

<!-- menu -->
<div id="hdr">
 <a href="http://www.gnome.org/">
  <img id="logo" src="http://gnome.org/img/logo/text-64" alt="Gnome" />
 </a>
 <div id="hdrNav">
 <a href="index.html"><b>Home</b></a> &middot;
 <a href="hal.html">HAL</a> &middot;
 <a href="gpm.html">Notification Icon</a> &middot;
 <a href="gpp.html">Preferences</a> &middot;
 <a href="packages.html">Precompiled Packages</a> &middot;
 <a href="faq.html">FAQ</a> &middot;
 <a href="bugs.html">Reporting Bugs</a> &middot;
 <a href="http://live.gnome.org/GnomePowerManager">Wiki</a>
 </div>
</div>
<!---->

<div id="body">
<h2>Frequently Asked Questions</h2>
<p>
 Please read through these common questions and answers before emailing the mailing list.
</p>

<ul>
<li>
  <a href="#dpms" class="faqtable">Why doesn't DPMS work when I've enabled it in XScreenSaver?</a>
</li><li>
  <a href="#whynobattery" class="faqtable">GNOME Power Manager doesn't spin down my hard-drive!</a>
</li><li>
  <a href="#hald_selinux" class="faqtable">SELinux doesn't let HAL write to /proc/acpi!</a>
</li><li>
  <a href="#pmu_less_than_acpi" class="faqtable">Why doesn't PMU have the same functionality as ACPI?</a>
</li><li>
  <a href="#slow_hal_updates" class="faqtable">Why do events (such as removing the AC adapter) take so long to register?</a>
</li><li>
  <a href="#set_power_save" class="faqtable">Why do I get the error: <b>SetPowerSave call failed</b>?</a>
</li><li>
  <a href="#dbus_session_error" class="faqtable">Why do I get the error: <b>libnotify: Error connecting to session bus:</b>?</a>
</li><li>
  <a href="#shell_script" class="faqtable">How do I query the battery state from my shell script?</a>
</li><li>
  <a href="#suspend_failure" class="faqtable">Nothing happens when I click suspend or hibernate!</a>
</li><li>
  <a href="#power_manager" class="faqtable">What is PowerManager?</a>
</li><li>
  <a href="#updates" class="faqtable">Can I get updates to the progress of GNOME Power Manager?</a>
</li><li>
  <a href="#debian_unstable" class="faqtable">I run Debian stable/unstable. Can I run GNOME Power Manager?</a>
</li><li>
  <a href="#update_dbus" class="faqtable">Why do we need such an up-to-date DBUS?</a>
</li><li>
  <a href="#update_hal" class="faqtable">Why do we need such an up-to-date HAL?</a>
</li><li>
  <a href="#video_s3" class="faqtable">Why doesn't my video adaptor come back after a suspend?</a>
</li><li>
  <a href="#autostart" class="faqtable">Why doesn't GNOME Power manager autostart?</a>
</li>
</ul>
<br/>
<br/>

<a name="dpms"></a><hr/>
<p class="faqquestion">
Why doesn't DPMS work when I've enabled it in XScreenSaver?
</p>
<p class="faqanswer">
It's enabled for <b>xscreensaver</b>, not <b>gnome-screensaver</b>.
XSS is the legacy system that will be replaced with gnome-screensaver very soon.
You probably need to install this package, and then g-p-m will automatically
work with gnome-screensaver to use the DPMS settings of your monitor.
</p>
<p class="faqanswer">
It's also been decided that DPMS support should probably be merged into g-p-m,
instead of g-s (over a release or two) as it belongs better in a power daemon,
than a screensaver daemon. So long term, g-p-m will control DPMS itself.
</p>

<a name="whynobattery"></a><hr/>
<p class="faqquestion">
GNOME Power Manager doesn't spin down my hard-drive!
</p>
<p class="faqanswer">
After numerous debates, the consensus was that is was not a good idea to add 
this functionality to HAL.
It's was decided user-configurable powermanagement was not really required when 
modern harddisks have really intelligent powermanagment.
</p>
<p class="faqanswer">
Here the power consumption data for a typical notebook harddisk (ide/sata):
</p>
<pre>
Startup (peak, max.)		5.5W 	NC	
Seek				2.3W	2.7W	
Read (avg.)			2.0W	2.3W	
Write (avg.)			2.0W	2.3W	
Active idle (avg.)		1.1W	1.2W	
Low power idle (avg.)		0.85W	0.9W	
Standby (avg.)			0.2W	0.25W	
Sleep				0.1W	NC
</pre>
<p class="faqanswer">
The conclusions you can take from this are:
</p>
<ul>
<li>
A disk on Low Power idle need less than 1 Watt per hour. For a normal battery 
with 50000mWh you could run the harddisk for over 50 hours.
</li>
<li>
If you do not read/write from/to the harddisk the disk regulates power, 
but never shuts down the device. The reason is easy: you lost more power with 
each startup than to leave the harddisk online somewhere between 'Active idle' and 
'Low power idle' (depends on the model/manufacturer). 
</li>
<li>
The other reason to leave this to the internal powermanagement of the 
disk is: the time needed to reactivate the device. You lose more performance 
than you lose power between 'Active idle' and 'Low power idle'.
</li>
<li>
If you use a journaling file system you normally need to flush 
periodically. This could run in a race between shut down device and restart 
device by system to flush. This means more power consumption as you change 
nothing.
</li>
<li>
You can't set powermanagement for exteral USB harddisks, because you can't
send the needed commands over the USB link to the disk.
</li>
</ul>
<p class="faqanswer">
Thanks to Danny Kukawka for his knowledge and for explaining this to me.
</p>

<a name="hald_selinux"></a><hr/>
<p class="faqquestion">
SELinux doesn't let HAL write to /proc/acpi!
</p>
<p class="faqanswer">
I'm no selinux guy, but this is reported to fix the problem.
Please email me if you have better instructions, or a better fix!
</p>
<pre>
allow hald_t proc_t:file write;
allow hald_t unconfined_t:fifo_file read;
allow hald_t usbfs_t:dir read;
allow hald_t usbfs_t:file { ioctl write };
</pre>

<a name="pmu_less_than_acpi"></a><hr/>
<p class="faqquestion">
Why doesn't PMU have the same functionality as ACPI?
</p>
<p class="faqanswer">
I only have an ACPI laptop, so cannot code the PMU specific parts,
What I see needs to be done:
</p>
<ol>
<li>HAL has to be able to set and restore the LCD brightness. Maybe we can use pbbcmd for this.</li>
<li>HAL has to be able to suspend and hibernate the computer. This comes for free when PMU integrates with /sys/power/state (soon)</li>
</ol>
<p class="faqanswer">
Like I said, I do not own PMU hardware (can you donate me an old, broken, unwanted powerbook?) so it is difficult for me to test.
Help, as always, is really appreciated.
</p>

<a name="slow_hal_updates"></a><hr/>
<p class="faqquestion">
I'm running ACPI. Why do events (such as removing the AC adapter) take so long to register?
</p>
<p class="faqanswer">
One of two things might be the problem.
</p>
<ol>
<li>HAL might not be running the addon that captures the acpi event.</li>
<li>You BIOS could be faulty, and might need a work-around. Please send a bug report.</li>
</ol>
<p class="faqanswer">
For the first case, try to find the hal processes that are running:
</p>
<pre>
ps -a | grep hal
</pre>
<p class="faqanswer">
And check for the process hald-addon-acpi.
If it is not being run, then please make sure that HAL is being run with the <b>--retain-privileges</b> option in the haldaemon initscript.
An alternative to this is to use acpid, rather than the kernel proc file.
</p>

<a name="set_power_save"></a><hr/>
<p class="faqquestion">
Why do I get the error:
</p>
<pre>
** (gnome-power-manager:9234): WARNING **: 
org.freedesktop.Hal.Device.SystemPowerManagement.SetPowerSave call failed (1)
</pre>
<p class="faqanswer">
HAL does not yet do anything with this function call, it is a stub, and returns false.
Future HAL versions will use SetPowerSave to set a lowpower mode.
You can safely ignore this message.
</p>
<p class="faqanswer">
For Fedora Core 4 systems (and Rawhide) you can see this <a href="https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=169054">bugzilla link</a> for progress.
</p>

<a name="dbus_session_error"></a><hr/>
<p class="faqquestion">
Why do I get the error:
</p>
<pre>
./gnome-power-manager(7889): libnotify: Error connecting to session bus: 
Failed to connect to socket /tmp/dbus-Emfs6JOgHK: Connection refused
** ERROR **: Cannot initialise libnotify!
aborting...
</pre>
<p class="faqanswer">
Most distro's set up the dbus session daemon when you log in to X, or when running GNOME.
If your distro does not do this you will have to manually run:
</p>
<pre>
eval `dbus-launch --auto-syntax`
</pre>
<p class="faqanswer">
If this works, you can add this to your <a href="http://mail.gnome.org/archives/muine-list/2004-December/msg00038.html">X startup</a>.<br/>
<b>GNOME Power Manager later than 0.2.1 warns the user, rather than give this cryptic libnotify message</b>
</p>

<a name="shell_script"></a><hr/>
<p class="faqquestion">
How do I query GNOME Power Manager's battery state from my shell script?
</p>
<p class="faqanswer">
You can use the dbus-send program.
For example, to get the boolean value for the IsOnBattery method, you would use the following:
</p>
<pre>
dbus-send --session --print-reply \
--dest=org.gnome.GnomePowerManager \
/org/gnome/GnomePowerManager \
org.gnome.GnomePowerManager.isOnBattery
</pre>

<a name="suspend_failure"></a><hr/>
<p class="faqquestion">
Nothing happens when I click suspend or hibernate.
</p>
<p class="faqanswer">
HAL might not *yet* support your distro, or you might have found a bug in GNOME Power Manager.
Refer to the <a href="report_bug.php#suspend_does_nothing">Reporting Bugs</a> section.
</p>

<a name="power_manager"></a><hr/>
<p class="faqquestion">
What is PowerManager - why was GNOME Power Manager depending on it, but now obsoletes it?
</p>
<p class="faqanswer">
Before HAL had the method support (added in 0.5.4), GNOME Power Manager used an external daemon running as root to do all the dirty work.
This daemon was called PowerManager.
This is now obsolete with the newest HAL, and with the new work that we have done, HAL far surpasses the capabilities of PowerManager.
<b>PowerManager and pmscripts are now obsolete.</b>
</p>

<a name="updates"></a><hr/>
<p class="faqquestion">
Can I get updates to the progress of GNOME Power Manager? Do you have an RSS feed?
</p>
<p class="faqanswer">
You can get CVS updates from <a href="http://cia.navi.cx/stats/project/gnome/gnome-power-manager/.rss">navi.cx</a> in RSS format.
There are also project statistics and access graphs provided by <a href="http://sourceforge.net/project/stats/?group_id=133929&amp;ugn=gnome-power">Sourceforge</a>.
</p>

<a name="debian_unstable"></a><hr/>
<p class="faqquestion">
I run Debian stable/unstable. Can I run GNOME Power Manager?
</p>
<p class="faqanswer">
No. Debian do not follow new HAL and DBUS releases like other bleeding-edge distros do.
Ubuntu is the only Debian based distro that I know that follows upstream so closely.
</p>

<a name="update_dbus"></a><hr/>
<p class="faqquestion">
Why do we need such an up-to-date DBUS?
</p>
<p class="faqanswer">
The DBUS interface API is changing <b>frequently</b>, and will continue to do so until DBUS 1.0 is released.
Many DBUS apps have lots of configure logic and extra code that I could not maintain - and is a waste of my time to support a version of DBUS that is already obsolete.
I will always track the latest released version.
Also, some bugs in the newer DBUS's have been fixed that impact the operation of GNOME Power Manager.
You are welcome to patch G-P-M to work with an older DBUS if you wish.
</p>

<a name="update_hal"></a><hr/>
<p class="faqquestion">
Why do we need such an up-to-date HAL?
</p>
<p class="faqanswer">
G-P-M uses advanced features of HAL that <b>did not exist</b> in past versions.
You cannot patch G-P-M to support an older HAL, as it <b>will not</b> work.
Encourage your distro to update their version of HAL, and then G-P-M will work.
</p>

<a name="video_s3"></a><hr/>
<p class="faqquestion">
Why doesn't my video adaptor come back after a suspend? It just displays black.
</p>
<p class="faqanswer">
You may need to add a s3 command to your kernel boot string so that the kernel can re-initialise your video card.
See <a href="data/video.txt">this document</a> for more details, or to see if your system has been identified as needing the switch.
</p>

<a name="autostart"></a><hr/>
<p class="faqquestion">
Why doesn't GNOME Power manager autostart?
</p>
<p class="faqanswer">
For the moment, you will have to run GNOME Power Manager from a terminal (it will not autostart).
It will hopefully be either patched into the default upstream startup, or will use gnome-services when it arrives in mainline.
You can also use gnome-session (this is what I do) to launch GNOME Power Manager for each session.
</p>
<center>
<img src="images/gnome-session.png" alt="[img]"/>
</center>
<p class="caption">
You can launch gnome-power-manager automatically using the gnome-session-properties program
</p>

</div>

<!-- sidebar -->
<div id="sidebar">
 <p class="section">Downloads</p>
 <p>GNOME Power Manager should come bundled with most modern distributions.</p>
 <p>
  The latest source releases can always be found at the
  <a href="http://ftp.gnome.org/pub/GNOME/sources/gnome-power-manager/">
  GNOME ftp site</a>.
 </p>
 <p>
  Make sure to get <a href="http://www.freedesktop.org/Software/hal">
  latest release of HAL</a>, the service that GNOME Power Manager depends on.
 </p>
 <br />
 <p class="section">Feedback</p>
 <p>
  Bugs should be reported to the <a href="http://bugzilla.gnome.org">
  GNOME Bug Tracking System</a>.
 </p>
 <p>
  Please read the <a href="faq.html">FAQ</a> and the 
  <a href="bugs.html">bug reporting guidelines</a> before creating a new bug.
 </p>
 <p>
  You can get in touch with developers and other users by
  <a href="mailto:gnome-power-devel@lists.sourceforge.net">sending a mail</a>
  to the Power Manager 
  <a href="http://mail.gnome.org/mailman/listinfo/gnome-power-manager-list">
  mailing list</a>
  [<a href="http://sourceforge.net/mailarchive/forum.php?forum=gnome-power-devel">Archives</a>].
 </p>
</div>
<!---->

<!-- copyright -->
<div id="copyright">
 Copyright &copy; 2005, Richard Hughes.
 <br />
 <a href="http://validator.w3.org/check/referer">Optimized</a>
 for <a href="http://www.w3.org/">standards</a>.
</div>
<!---->

</body>
</html>
